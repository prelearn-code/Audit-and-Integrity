# VDS æ€§èƒ½æµ‹è¯• - ä¸‰ä¸ªç‹¬ç«‹æµ‹è¯•

## æ¦‚è¿°

æœ¬æµ‹è¯•æ¡†æ¶æä¾›**ä¸‰ä¸ªå®Œå…¨ç‹¬ç«‹çš„æµ‹è¯•è„šæœ¬**ï¼Œæ¯ä¸ªæµ‹è¯•ä¸“æ³¨äºä¸€ä¸ªç‰¹å®šåŠŸèƒ½ï¼š

| æµ‹è¯• | è„šæœ¬ | åŠŸèƒ½ | ä¾èµ– |
|------|------|------|------|
| 1. æ’å…¥æµ‹è¯• | `run_insert_test.sh` | æµ‹è¯•æ–‡ä»¶æ’å…¥æ€§èƒ½ | æ—  |
| 2. æœç´¢æµ‹è¯• | `run_search_test.sh` | æµ‹è¯•å…³é”®è¯æœç´¢æ€§èƒ½ | éœ€è¦æ’å…¥æµ‹è¯•çš„æ•°æ®åº“ |
| 3. éªŒè¯æµ‹è¯• | `run_verify_test.sh` | æµ‹è¯•è¯æ˜éªŒè¯æ€§èƒ½ | éœ€è¦æœç´¢æµ‹è¯•çš„è¯æ˜æ–‡ä»¶ |

---

## âš ï¸ é‡è¦è¯´æ˜

### ä¸‰ä¸ªæµ‹è¯•æ˜¯ç‹¬ç«‹çš„ï¼š
- âœ… **æ¯ä¸ªæµ‹è¯•æœ‰è‡ªå·±çš„è¿è¡Œè„šæœ¬**
- âœ… **æ¯ä¸ªæµ‹è¯•æœ‰è‡ªå·±çš„æ¸…ç†é€»è¾‘**
- âœ… **æ‚¨å¯ä»¥å•ç‹¬è¿è¡Œä»»ä½•ä¸€ä¸ªæµ‹è¯•**
- âœ… **æµ‹è¯•ä¸ä¼šè‡ªåŠ¨è¿ç»­è¿è¡Œ**

### ä½†æ˜¯æœ‰ä¾èµ–å…³ç³»ï¼š
- ğŸ”— æœç´¢æµ‹è¯•éœ€è¦æ’å…¥æµ‹è¯•äº§ç”Ÿçš„æ•°æ®åº“
- ğŸ”— éªŒè¯æµ‹è¯•éœ€è¦æœç´¢æµ‹è¯•äº§ç”Ÿçš„è¯æ˜æ–‡ä»¶

---

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### 1. æ’å…¥æ€§èƒ½æµ‹è¯•ï¼ˆç‹¬ç«‹ï¼‰

**ç›®çš„**: æµ‹è¯•æ–‡ä»¶åŠ å¯†å’Œæ’å…¥åˆ°æ•°æ®åº“çš„æ€§èƒ½

**æ¸…ç†èŒƒå›´**: æ¸…ç†æ‰€æœ‰æ•°æ®åº“å’Œæ’å…¥ç›¸å…³æ–‡ä»¶

```bash
cd system_test
./run_insert_test.sh
```

**æ¸…ç†çš„æ–‡ä»¶**:
- âœ… `index_db.json` - ç´¢å¼•æ•°æ®åº“
- âœ… `search_db.json` - æœç´¢æ•°æ®åº“
- âœ… `EncFiles/*` - æ‰€æœ‰åŠ å¯†æ–‡ä»¶
- âœ… `MetaFiles/*` - æ‰€æœ‰å…ƒæ•°æ®æ–‡ä»¶
- âœ… `Insert/*` - æ‰€æœ‰æ’å…¥JSON
- âœ… `keyword_states.json` - å…³é”®è¯çŠ¶æ€

**ç”Ÿæˆçš„æ–‡ä»¶**:
- âœ… `index_db.json` - æ–°çš„ç´¢å¼•æ•°æ®åº“
- âœ… `search_db.json` - æ–°çš„æœç´¢æ•°æ®åº“
- âœ… åŠ å¯†æ–‡ä»¶å’Œå…ƒæ•°æ®
- âœ… æµ‹è¯•ç»“æœ: `insert_results_YYYYMMDD_HHMMSS/`

**ç‰¹ç‚¹**:
- ğŸ”¥ **å®Œå…¨ç‹¬ç«‹**ï¼Œä¸ä¾èµ–ä»»ä½•å…¶ä»–æµ‹è¯•
- ğŸ”¥ **å®Œå…¨é‡ç½®**ï¼Œæ¸…ç†æ‰€æœ‰æ•°æ®åé‡æ–°æ’å…¥

---

### 2. æœç´¢æ€§èƒ½æµ‹è¯•ï¼ˆç‹¬ç«‹ï¼‰

**ç›®çš„**: æµ‹è¯•å…³é”®è¯æœç´¢å’Œè¯æ˜ç”Ÿæˆçš„æ€§èƒ½

**æ¸…ç†èŒƒå›´**: åªæ¸…ç†æœç´¢tokenå’Œproofæ–‡ä»¶ï¼Œä¿ç•™æ•°æ®åº“

```bash
cd system_test
./run_search_test.sh
```

**å‰ææ¡ä»¶**:
- âš ï¸ å¿…é¡»å…ˆè¿è¡Œè¿‡ `run_insert_test.sh`
- âš ï¸ éœ€è¦å­˜åœ¨ `index_db.json` å’Œ `search_db.json`

**è„šæœ¬ä¼šè‡ªåŠ¨æ£€æŸ¥**:
- å¦‚æœæ•°æ®åº“ä¸å­˜åœ¨ï¼Œè„šæœ¬ä¼šæç¤ºæ‚¨å…ˆè¿è¡Œæ’å…¥æµ‹è¯•

**æ¸…ç†çš„æ–‡ä»¶**:
- âœ… `Search/*.json` - æ‰€æœ‰æœç´¢tokenæ–‡ä»¶
- âœ… `SearchProof/*.json` - æ‰€æœ‰æœç´¢è¯æ˜æ–‡ä»¶

**ä¿ç•™çš„æ–‡ä»¶**:
- âš ï¸ `index_db.json` - æœç´¢éœ€è¦ç´¢å¼•æ•°æ®åº“
- âš ï¸ `search_db.json` - æœç´¢éœ€è¦æœç´¢æ•°æ®åº“
- âš ï¸ `EncFiles/*` - æœç´¢éœ€è¦åŠ å¯†æ–‡ä»¶
- âš ï¸ `metadata/*` - æœç´¢éœ€è¦å…ƒæ•°æ®

**ç”Ÿæˆçš„æ–‡ä»¶**:
- âœ… æœç´¢tokenæ–‡ä»¶
- âœ… æœç´¢è¯æ˜æ–‡ä»¶
- âœ… æµ‹è¯•ç»“æœ: `search_results_YYYYMMDD_HHMMSS/`

**ç‰¹ç‚¹**:
- ğŸ”¥ **ç‹¬ç«‹è¿è¡Œ**ï¼Œä½†ä¾èµ–æ’å…¥æµ‹è¯•çš„æ•°æ®åº“
- ğŸ”¥ **å¯é‡å¤è¿è¡Œ**ï¼Œä¸å½±å“æ•°æ®åº“

---

### 3. éªŒè¯æ€§èƒ½æµ‹è¯•ï¼ˆç‹¬ç«‹ï¼‰

**ç›®çš„**: æµ‹è¯•è¯æ˜éªŒè¯çš„æ€§èƒ½

**æ¸…ç†èŒƒå›´**: ä¸éœ€è¦æ¸…ç†ï¼ˆåªè¯»æµ‹è¯•ï¼‰

```bash
cd system_test
./run_verify_test.sh
```

**å‰ææ¡ä»¶**:
- âš ï¸ å¿…é¡»å…ˆè¿è¡Œè¿‡ `run_insert_test.sh`ï¼ˆéœ€è¦æ•°æ®åº“ï¼‰
- âš ï¸ å¿…é¡»å…ˆè¿è¡Œè¿‡ `run_search_test.sh`ï¼ˆéœ€è¦è¯æ˜æ–‡ä»¶ï¼‰

**è„šæœ¬ä¼šè‡ªåŠ¨æ£€æŸ¥**:
- å¦‚æœæ•°æ®åº“ä¸å­˜åœ¨ï¼Œæç¤ºè¿è¡Œæ’å…¥æµ‹è¯•
- å¦‚æœè¯æ˜æ–‡ä»¶ä¸å­˜åœ¨ï¼Œæç¤ºè¿è¡Œæœç´¢æµ‹è¯•

**è¯»å–çš„æ–‡ä»¶**:
- ğŸ“– `SearchProof/*.json` - æœç´¢è¯æ˜æ–‡ä»¶
- ğŸ“– `index_db.json` - ç´¢å¼•æ•°æ®åº“
- ğŸ“– `search_db.json` - æœç´¢æ•°æ®åº“

**ç”Ÿæˆçš„æ–‡ä»¶**:
- âœ… æµ‹è¯•ç»“æœ: `verify_results_YYYYMMDD_HHMMSS/`

**ç‰¹ç‚¹**:
- ğŸ”¥ **å®Œå…¨åªè¯»**ï¼Œä¸ä¿®æ”¹ä»»ä½•æ•°æ®
- ğŸ”¥ **å¯é‡å¤è¿è¡Œ**ï¼Œæ— å‰¯ä½œç”¨

---

## ğŸ“‹ å®Œæ•´æµ‹è¯•æµç¨‹

å¦‚æœæ‚¨æƒ³è¿è¡Œå®Œæ•´çš„æµ‹è¯•æµç¨‹ï¼ŒæŒ‰é¡ºåºæ‰§è¡Œä¸‰ä¸ªè„šæœ¬ï¼š

```bash
cd system_test

# 1. è¿è¡Œæ’å…¥æµ‹è¯•ï¼ˆæ¸…ç†æ‰€æœ‰æ•°æ®ï¼Œé‡æ–°æ’å…¥ï¼‰
./run_insert_test.sh

# 2. è¿è¡Œæœç´¢æµ‹è¯•ï¼ˆæ¸…ç†æœç´¢æ–‡ä»¶ï¼Œä¿ç•™æ•°æ®åº“ï¼‰
./run_search_test.sh

# 3. è¿è¡ŒéªŒè¯æµ‹è¯•ï¼ˆåªè¯»å–è¯æ˜æ–‡ä»¶ï¼‰
./run_verify_test.sh
```

æ¯ä¸ªæµ‹è¯•å®Œæˆåï¼Œä¼šæç¤ºä¸‹ä¸€æ­¥è¦è¿è¡Œå“ªä¸ªæµ‹è¯•ã€‚

---

## ğŸ” å•ç‹¬é‡å¤è¿è¡ŒæŸä¸ªæµ‹è¯•

### åœºæ™¯1: é‡æ–°æµ‹è¯•æ’å…¥æ€§èƒ½

```bash
cd system_test
./run_insert_test.sh  # æ¸…ç†æ‰€æœ‰æ•°æ®ï¼Œé‡æ–°æ’å…¥
```

âš ï¸ **æ³¨æ„**: è¿™ä¼šåˆ é™¤æ‰€æœ‰æ•°æ®åº“å’Œæ–‡ä»¶ï¼Œéœ€è¦é‡æ–°è¿è¡Œæœç´¢å’ŒéªŒè¯æµ‹è¯•

---

### åœºæ™¯2: é‡æ–°æµ‹è¯•æœç´¢æ€§èƒ½

```bash
cd system_test
./run_search_test.sh  # åªæ¸…ç†æœç´¢æ–‡ä»¶ï¼Œä½¿ç”¨ç°æœ‰æ•°æ®åº“
```

âœ… **å¥½å¤„**: ä¸éœ€è¦é‡æ–°æ’å…¥æ–‡ä»¶ï¼ŒèŠ‚çœæ—¶é—´
âš ï¸ **æ³¨æ„**: ä¼šæ¸…ç†ä¹‹å‰çš„è¯æ˜æ–‡ä»¶ï¼Œéœ€è¦é‡æ–°è¿è¡ŒéªŒè¯æµ‹è¯•

---

### åœºæ™¯3: é‡æ–°æµ‹è¯•éªŒè¯æ€§èƒ½

```bash
cd system_test
./run_verify_test.sh  # ä¸æ¸…ç†ä»»ä½•æ–‡ä»¶ï¼Œåªè¯»å–
```

âœ… **å¥½å¤„**: å®Œå…¨æ— å‰¯ä½œç”¨ï¼Œå¯ä»¥åå¤è¿è¡Œ

---

## ğŸ¯ ä½¿ç”¨ç¤ºä¾‹

### ç¤ºä¾‹1: ä»é›¶å¼€å§‹å®Œæ•´æµ‹è¯•

```bash
cd system_test

# æ’å…¥æµ‹è¯•
./run_insert_test.sh
# ç­‰å¾…å®Œæˆ...

# æœç´¢æµ‹è¯•
./run_search_test.sh
# ç­‰å¾…å®Œæˆ...

# éªŒè¯æµ‹è¯•
./run_verify_test.sh
# ç­‰å¾…å®Œæˆ...
```

---

### ç¤ºä¾‹2: åªæµ‹è¯•æœç´¢æ€§èƒ½ï¼ˆå·²æœ‰æ•°æ®åº“ï¼‰

```bash
cd system_test

# ç¡®è®¤æ•°æ®åº“å­˜åœ¨
ls -lh ../Storage-node/data/index_db.json
ls -lh ../Storage-node/data/search_db.json

# è¿è¡Œæœç´¢æµ‹è¯•
./run_search_test.sh
```

å¦‚æœæ•°æ®åº“ä¸å­˜åœ¨ï¼Œè„šæœ¬ä¼šæç¤ºï¼š
```
âŒ æœªæ‰¾åˆ°ç´¢å¼•æ•°æ®åº“: ../Storage-node/data/index_db.json

æœç´¢æµ‹è¯•éœ€è¦æ’å…¥æµ‹è¯•äº§ç”Ÿçš„æ•°æ®åº“æ–‡ä»¶ã€‚
è¯·å…ˆè¿è¡Œæ’å…¥æµ‹è¯•ï¼š
  ./run_insert_test.sh
```

---

### ç¤ºä¾‹3: å¤šæ¬¡è¿è¡ŒéªŒè¯æµ‹è¯•

```bash
cd system_test

# ç¬¬ä¸€æ¬¡è¿è¡Œ
./run_verify_test.sh
# ç»“æœ: verify_results_20251230_100000/

# ç¬¬äºŒæ¬¡è¿è¡Œï¼ˆä½¿ç”¨ç›¸åŒçš„è¯æ˜æ–‡ä»¶ï¼‰
./run_verify_test.sh
# ç»“æœ: verify_results_20251230_100030/

# æ¯”è¾ƒä¸¤æ¬¡ç»“æœ
diff verify_results_20251230_100000/ verify_results_20251230_100030/
```

---

## âš™ï¸ é«˜çº§ç”¨æ³•

### æŸ¥çœ‹å¸®åŠ©ä¿¡æ¯

```bash
./run_insert_test.sh --help
./run_search_test.sh --help
./run_verify_test.sh --help
```

### æŸ¥çœ‹å½“å‰æ•°æ®çŠ¶æ€

```bash
# ä½¿ç”¨äº¤äº’å¼æ¼”ç¤ºè„šæœ¬
./test_cleanup_demo.sh
```

è¿™ä¸ªè„šæœ¬ä¼šæ˜¾ç¤ºï¼š
- æ•°æ®åº“æ–‡ä»¶çŠ¶æ€
- å®¢æˆ·ç«¯æ–‡ä»¶æ•°é‡
- æœåŠ¡ç«¯æ–‡ä»¶æ•°é‡
- è¯æ˜æ–‡ä»¶æ•°é‡

---

## ğŸ—‘ï¸ æ‰‹åŠ¨æ¸…ç†æ•°æ®

å¦‚æœéœ€è¦æ‰‹åŠ¨æ¸…ç†æ‰€æœ‰æ•°æ®ï¼š

```bash
cd system_test

# æ¸…ç†å®¢æˆ·ç«¯æ•°æ®
rm -f ../vds-client/data/EncFiles/*
rm -f ../vds-client/data/MetaFiles/*
rm -f ../vds-client/data/Insert/*
rm -f ../vds-client/data/Search/*.json
rm -f ../vds-client/data/keyword_states.json

# æ¸…ç†æœåŠ¡ç«¯æ•°æ®
rm -f ../Storage-node/data/index_db.json
rm -f ../Storage-node/data/search_db.json
rm -f ../Storage-node/data/metadata/*
rm -f ../Storage-node/data/EncFiles/*
rm -f ../Storage-node/data/SearchProof/*.json
```

æˆ–ä½¿ç”¨ Makefileï¼š
```bash
cd system_test/insert_files && make clean-data
cd system_test/search_files && make clean-data
cd system_test/verify_files && make clean-data
```

---

## ğŸ“Š æµ‹è¯•ç»“æœ

æ¯ä¸ªæµ‹è¯•ä¼šåˆ›å»ºç‹¬ç«‹çš„ç»“æœç›®å½•ï¼š

```
system_test/
â”œâ”€â”€ insert_results_20251230_100000/
â”‚   â”œâ”€â”€ insert_detailed.csv
â”‚   â””â”€â”€ insert_summary.json
â”œâ”€â”€ search_results_20251230_100500/
â”‚   â”œâ”€â”€ search_detailed.csv
â”‚   â””â”€â”€ search_summary.json
â””â”€â”€ verify_results_20251230_101000/
    â”œâ”€â”€ verify_detailed.csv
    â””â”€â”€ verify_summary.json
```

---

## â“ å¸¸è§é—®é¢˜

### Q1: è¿è¡Œæœç´¢æµ‹è¯•æ—¶æç¤º"æœªæ‰¾åˆ°æ•°æ®åº“"

**A**: æ‚¨éœ€è¦å…ˆè¿è¡Œæ’å…¥æµ‹è¯•ï¼š
```bash
./run_insert_test.sh
```

---

### Q2: è¿è¡ŒéªŒè¯æµ‹è¯•æ—¶æç¤º"æœªæ‰¾åˆ°è¯æ˜æ–‡ä»¶"

**A**: æ‚¨éœ€è¦å…ˆè¿è¡Œæœç´¢æµ‹è¯•ï¼š
```bash
./run_search_test.sh
```

---

### Q3: æˆ‘æƒ³é‡æ–°æµ‹è¯•æœç´¢æ€§èƒ½ï¼Œä½†ä¸æƒ³é‡æ–°æ’å…¥æ–‡ä»¶

**A**: ç›´æ¥è¿è¡Œæœç´¢æµ‹è¯•å³å¯ï¼š
```bash
./run_search_test.sh
```
æœç´¢æµ‹è¯•åªæ¸…ç†æœç´¢æ–‡ä»¶ï¼Œä¸ä¼šåˆ é™¤æ•°æ®åº“ã€‚

---

### Q4: ä¸‰ä¸ªæµ‹è¯•å¯ä»¥åŒæ—¶è¿è¡Œå—ï¼Ÿ

**A**: ä¸å»ºè®®ã€‚ä¸‰ä¸ªæµ‹è¯•æ“ä½œç›¸åŒçš„æ•°æ®åº“æ–‡ä»¶ï¼ŒåŒæ—¶è¿è¡Œå¯èƒ½å¯¼è‡´æ•°æ®ä¸ä¸€è‡´ã€‚

---

### Q5: å¦‚ä½•æŸ¥çœ‹æŸä¸ªæµ‹è¯•æ¸…ç†äº†å“ªäº›æ–‡ä»¶ï¼Ÿ

**A**: æŸ¥çœ‹ `DATA_CLEANUP_GUIDE.md` æ–‡æ¡£ï¼Œé‡Œé¢æœ‰è¯¦ç»†è¯´æ˜ã€‚

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- `DATA_CLEANUP_GUIDE.md` - æ•°æ®æ¸…ç†è¯¦ç»†æŒ‡å—
- `test_cleanup_demo.sh` - äº¤äº’å¼æµ‹è¯•æ¼”ç¤ºè„šæœ¬
- `run_end_to_end_test.sh` - ç«¯åˆ°ç«¯æµ‹è¯•è„šæœ¬ï¼ˆå¯é€‰ï¼Œä¼šè‡ªåŠ¨è¿ç»­è¿è¡Œä¸‰ä¸ªæµ‹è¯•ï¼‰

---

## æ€»ç»“

âœ… **ä¸‰ä¸ªç‹¬ç«‹çš„æµ‹è¯•è„šæœ¬**
- `run_insert_test.sh` - æ’å…¥æµ‹è¯•
- `run_search_test.sh` - æœç´¢æµ‹è¯•
- `run_verify_test.sh` - éªŒè¯æµ‹è¯•

âœ… **æ¯ä¸ªæµ‹è¯•ç‹¬ç«‹è¿è¡Œ**
- æœ‰è‡ªå·±çš„æ¸…ç†é€»è¾‘
- æœ‰è‡ªå·±çš„ç»“æœç›®å½•
- å¯ä»¥å•ç‹¬é‡å¤è¿è¡Œ

âœ… **æ™ºèƒ½ä¾èµ–æ£€æŸ¥**
- è‡ªåŠ¨æ£€æŸ¥å‰ç½®æ¡ä»¶
- æ˜ç¡®æç¤ºç¼ºå°‘çš„æ•°æ®
- å¼•å¯¼ç”¨æˆ·è¿è¡Œæ­£ç¡®çš„æµ‹è¯•

âœ… **çµæ´»ä½¿ç”¨**
- å¯ä»¥å®Œæ•´æµç¨‹è¿è¡Œ
- å¯ä»¥å•ç‹¬è¿è¡ŒæŸä¸ªæµ‹è¯•
- å¯ä»¥é‡å¤è¿è¡Œæµ‹è¯•
