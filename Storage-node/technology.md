# ğŸ“˜ å»ä¸­å¿ƒåŒ–å­˜å‚¨èŠ‚ç‚¹ v3.0 - æŠ€æœ¯æ–‡æ¡£

## ğŸ“š ç›®å½•

1. [ç³»ç»Ÿæ¶æ„](#ç³»ç»Ÿæ¶æ„)
2. [æ ¸å¿ƒæ•°æ®ç»“æ„](#æ ¸å¿ƒæ•°æ®ç»“æ„)
3. [å¯†ç å­¦å‡½æ•°å®ç°](#å¯†ç å­¦å‡½æ•°å®ç°)
4. [æ–‡ä»¶æ“ä½œå‡½æ•°](#æ–‡ä»¶æ“ä½œå‡½æ•°)
5. [ç´¢å¼•ç®¡ç†å‡½æ•°](#ç´¢å¼•ç®¡ç†å‡½æ•°)
6. [å®Œæ•´è¿è¡Œæµç¨‹](#å®Œæ•´è¿è¡Œæµç¨‹)
7. [å‡½æ•°è°ƒç”¨é“¾](#å‡½æ•°è°ƒç”¨é“¾)
8. [æ•°æ®æµå‘å›¾](#æ•°æ®æµå‘å›¾)

---

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

### æ•´ä½“æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ç”¨æˆ·æ§åˆ¶å° (main.cpp)                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚æ’å…¥æ–‡ä»¶ â”‚  æœç´¢   â”‚  æ£€ç´¢   â”‚  åˆ é™¤   â”‚  è¯æ˜   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”´â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”´â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”´â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”´â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚         â”‚         â”‚         â”‚         â”‚
        â–¼         â–¼         â–¼         â–¼         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              StorageNode æ ¸å¿ƒç±»                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚  å¯†ç å­¦æ¨¡å—       â”‚  â”‚  å­˜å‚¨ç®¡ç†æ¨¡å—     â”‚            â”‚
â”‚  â”‚  - compute_hash  â”‚  â”‚  - index_db      â”‚            â”‚
â”‚  â”‚  - compute_prf   â”‚  â”‚  - file_storage  â”‚            â”‚
â”‚  â”‚  - pairing       â”‚  â”‚  - metadata      â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                           â”‚
        â–¼                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å¯†ç å­¦åº“        â”‚      â”‚   æ–‡ä»¶ç³»ç»Ÿå­˜å‚¨           â”‚
â”‚  - PBC          â”‚      â”‚  data/                  â”‚
â”‚  - OpenSSL      â”‚      â”‚  â”œâ”€â”€ config.json        â”‚
â”‚  - GMP          â”‚      â”‚  â”œâ”€â”€ index_db.json      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚  â”œâ”€â”€ node_info.json     â”‚
                         â”‚  â”œâ”€â”€ files/             â”‚
                         â”‚  â””â”€â”€ metadata/          â”‚
                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ç±»å±‚æ¬¡ç»“æ„

```cpp
StorageNode
â”œâ”€â”€ ç§æœ‰æˆå‘˜
â”‚   â”œâ”€â”€ å¯†ç å­¦å‚æ•° (pairing_t, element_t, mpz_t)
â”‚   â”œâ”€â”€ å­˜å‚¨æ˜ å°„ (index_database, file_storage)
â”‚   â””â”€â”€ é…ç½®ä¿¡æ¯ (node_id, data_dir, etc.)
â”‚
â”œâ”€â”€ å¯†ç å­¦å‡½æ•°
â”‚   â”œâ”€â”€ compute_hash_H1()   - SHA256å“ˆå¸Œ
â”‚   â”œâ”€â”€ compute_hash_H2()   - åˆ°ç¾¤å…ƒç´ çš„å“ˆå¸Œ
â”‚   â”œâ”€â”€ compute_hash_H3()   - æˆªæ–­å“ˆå¸Œ
â”‚   â”œâ”€â”€ compute_prf()       - ä¼ªéšæœºå‡½æ•°
â”‚   â””â”€â”€ decrypt_pointer()   - æŒ‡é’ˆè§£å¯†
â”‚
â”œâ”€â”€ JSON/æ–‡ä»¶æ“ä½œ
â”‚   â”œâ”€â”€ load_json_from_file()
â”‚   â”œâ”€â”€ save_json_to_file()
â”‚   â”œâ”€â”€ read_file_content()
â”‚   â””â”€â”€ write_file_content()
â”‚
â”œâ”€â”€ åˆå§‹åŒ–å‡½æ•°
â”‚   â”œâ”€â”€ setup_cryptography()
â”‚   â”œâ”€â”€ initialize_directories()
â”‚   â”œâ”€â”€ load_config()
â”‚   â””â”€â”€ load_index_database()
â”‚
â”œâ”€â”€ æ ¸å¿ƒåŠŸèƒ½
â”‚   â”œâ”€â”€ insert_file()
â”‚   â”œâ”€â”€ search_keyword()
â”‚   â”œâ”€â”€ retrieve_file()
â”‚   â”œâ”€â”€ delete_file()
â”‚   â””â”€â”€ generate_integrity_proof()
â”‚
â””â”€â”€ è¾…åŠ©å‡½æ•°
    â”œâ”€â”€ save_index_database()
    â”œâ”€â”€ save_node_info()
    â””â”€â”€ export_file_metadata()
```

---

## ğŸ“¦ æ ¸å¿ƒæ•°æ®ç»“æ„

### 1. IndexEntry (ç´¢å¼•æ¡ç›®)

```cpp
struct IndexEntry {
    std::string Ts;              // çŠ¶æ€ä»¤ç‰Œ
    std::string keyword;         // å…³é”®è¯
    std::string pointer;         // åŠ å¯†æŒ‡é’ˆ
    std::string file_identifier; // æ–‡ä»¶æ ‡è¯†ç¬¦
    bool valid;                  // æ˜¯å¦æœ‰æ•ˆ
};
```

**ç”¨é€”**: æ”¯æŒå…³é”®è¯æœç´¢çš„æ ¸å¿ƒç´¢å¼•ç»“æ„

**å­˜å‚¨ä½ç½®**: 
- å†…å­˜: `std::map<std::string, std::vector<IndexEntry>> index_database`
- ç£ç›˜: `data/index_db.json`

**å…³é”®è®¾è®¡**:
- ä»¥ `Ts` ä¸ºkeyè¿›è¡Œå¿«é€ŸæŸ¥æ‰¾
- æ”¯æŒå¤šä¸ªæ¡ç›®å…±äº«åŒä¸€ä¸ª `Ts` (ç¢°æ’å¤„ç†)
- `valid` å­—æ®µå®ç°è½¯åˆ é™¤

### 2. FileData (æ–‡ä»¶æ•°æ®)

```cpp
struct FileData {
    std::string file_id;         // æ–‡ä»¶ID
    std::string ciphertext;      // åŠ å¯†æ–‡æœ¬
    std::string pointer;         // æ–‡ä»¶æŒ‡é’ˆ
    std::string file_auth_tag;   // æ–‡ä»¶è®¤è¯æ ‡ç­¾
};
```

**ç”¨é€”**: å­˜å‚¨åŠ å¯†æ–‡ä»¶åŠå…¶å…ƒæ•°æ®

**å­˜å‚¨ä½ç½®**:
- å†…å­˜: `std::map<std::string, FileData> file_storage`
- ç£ç›˜: 
  - å¯†æ–‡: `data/files/<file_id>.enc`
  - å…ƒæ•°æ®: `data/metadata/<file_id>.json`

### 3. SearchResult (æœç´¢ç»“æœ)

```cpp
struct SearchResult {
    std::vector<std::string> file_identifiers;  // åŒ¹é…çš„æ–‡ä»¶IDåˆ—è¡¨
    std::vector<std::string> keyword_proofs;    // å…³é”®è¯è¯æ˜åˆ—è¡¨
    std::string aggregated_proof;               // èšåˆè¯æ˜
};
```

**ç”¨é€”**: å°è£…æœç´¢æ“ä½œçš„è¿”å›ç»“æœ

---

## ğŸ” å¯†ç å­¦å‡½æ•°å®ç°

### 1. setup_cryptography() - å¯†ç å­¦åˆå§‹åŒ–

```cpp
bool StorageNode::setup_cryptography()
```

**åŠŸèƒ½**: åˆå§‹åŒ–é…å¯¹å¯†ç å­¦å‚æ•°

**å®ç°æµç¨‹**:

```
1. å®šä¹‰é…å¯¹å‚æ•°å­—ç¬¦ä¸²
   â”œâ”€â”€ type a (å¯¹ç§°é…å¯¹)
   â”œâ”€â”€ q (ç¾¤é˜¶)
   â”œâ”€â”€ r (å­ç¾¤é˜¶)
   â””â”€â”€ å…¶ä»–å‚æ•°

2. åˆå§‹åŒ–é…å¯¹
   pairing_init_set_buf(pairing, param_str, len)

3. åˆå§‹åŒ–ç¾¤å…ƒç´ 
   â”œâ”€â”€ element_init_G1(g, pairing)    // ç”Ÿæˆå…ƒg
   â””â”€â”€ element_init_G1(mu, pairing)   // ç”Ÿæˆå…ƒmu

4. è®¾ç½®éšæœºå€¼
   â”œâ”€â”€ element_random(g)
   â””â”€â”€ element_random(mu)

5. åˆå§‹åŒ–å¤§æ•´æ•°
   mpz_init(N)
   mpz_set_ui(N, 1000000007)  // è®¾ç½®ä¸ºå¤§è´¨æ•°

6. è®¾ç½®æ ‡å¿—
   crypto_initialized = true

è¿”å›: true/false
```

**å…³é”®ç‚¹**:
- ä½¿ç”¨Type Aé…å¯¹ (å¯¹ç§°é…å¯¹ï¼Œæ•ˆç‡é«˜)
- `g` å’Œ `mu` æ˜¯ç¾¤G1ä¸­çš„éšæœºç”Ÿæˆå…ƒ
- `N` æ˜¯æ¨¡è¿ç®—çš„æ¨¡æ•°

### 2. compute_hash_H1() - SHA256å“ˆå¸Œ

```cpp
std::string StorageNode::compute_hash_H1(const std::string& input)
```

**åŠŸèƒ½**: è®¡ç®—è¾“å…¥å­—ç¬¦ä¸²çš„SHA256å“ˆå¸Œå€¼

**å®ç°æµç¨‹**:

```
è¾“å…¥: input (ä»»æ„å­—ç¬¦ä¸²)
   â†“
SHA256(input)
   â†“
hash[32 bytes]
   â†“
bytes_to_hex(hash, 32)
   â†“
è¾“å‡º: 64å­—ç¬¦çš„åå…­è¿›åˆ¶å­—ç¬¦ä¸²
```

**ä»£ç å®ç°**:
```cpp
unsigned char hash[SHA256_DIGEST_LENGTH];  // 32 bytes
SHA256((unsigned char*)input.c_str(), input.length(), hash);
return bytes_to_hex(hash, SHA256_DIGEST_LENGTH);
```

**ç”¨é€”**:
- æ–‡ä»¶æ ‡è¯†ç¬¦ç”Ÿæˆ
- å®Œæ•´æ€§è¯æ˜è®¡ç®—
- ä¸€èˆ¬å“ˆå¸Œéœ€æ±‚

### 3. compute_hash_H2() - å“ˆå¸Œåˆ°ç¾¤å…ƒç´ 

```cpp
void StorageNode::compute_hash_H2(element_t result, const std::string& input)
```

**åŠŸèƒ½**: å°†å­—ç¬¦ä¸²å“ˆå¸Œæ˜ å°„åˆ°é…å¯¹ç¾¤çš„å…ƒç´ 

**å®ç°æµç¨‹**:

```
è¾“å…¥: input
   â†“
SHA256(input) â†’ hash[32 bytes]
   â†“
element_from_hash(result, hash, 32)
   â†“
è¾“å‡º: result âˆˆ G1
```

**å…³é”®ç‚¹**:
- ç»“æœæ˜¯ç¾¤G1ä¸­çš„å…ƒç´ 
- ç¡®å®šæ€§æ˜ å°„ (ç›¸åŒè¾“å…¥â†’ç›¸åŒç¾¤å…ƒç´ )
- ç”¨äºå¯æœç´¢åŠ å¯†ä¸­çš„é™·é—¨ç”Ÿæˆ

### 4. compute_prf() - ä¼ªéšæœºå‡½æ•°

```cpp
void StorageNode::compute_prf(mpz_t result, 
                              const std::string& seed, 
                              const std::string& input)
```

**åŠŸèƒ½**: åŸºäºç§å­å’Œè¾“å…¥è®¡ç®—ä¼ªéšæœºå€¼

**å®ç°æµç¨‹**:

```
è¾“å…¥: seed, input
   â†“
combined = seed + input
   â†“
hash_hex = compute_hash_H1(combined)
   â†“
mpz_set_str(result, hash_hex, 16)  // åå…­è¿›åˆ¶å­—ç¬¦ä¸²â†’å¤§æ•´æ•°
   â†“
mpz_mod(result, result, N)         // æ¨¡Nè¿ç®—
   â†“
è¾“å‡º: result âˆˆ [0, N-1]
```

**ç”¨é€”**:
- ç”Ÿæˆç¡®å®šæ€§éšæœºæ•°
- å¯†é’¥æ´¾ç”Ÿ
- çŠ¶æ€ä»¤ç‰Œç”Ÿæˆ

### 5. decrypt_pointer() - æŒ‡é’ˆè§£å¯†

```cpp
std::string StorageNode::decrypt_pointer(const std::string& encrypted_pointer, 
                                         const std::string& key)
```

**åŠŸèƒ½**: ä½¿ç”¨å¯†é’¥è§£å¯†åŠ å¯†æŒ‡é’ˆ

**å®ç°æµç¨‹**:

```
è¾“å…¥: encrypted_pointer, key
   â†“
å¯¹æ¯ä¸ªå­—èŠ‚ i:
   result[i] = encrypted_pointer[i] XOR key[i % key.length()]
   â†“
è¾“å‡º: decrypted_pointer
```

**ç‰¹ç‚¹**:
- ç®€å•çš„XORåŠ å¯† (å¯æ›¿æ¢ä¸ºAESç­‰)
- å¯†é’¥å¾ªç¯ä½¿ç”¨
- å¯¹ç§°åŠ å¯† (åŠ å¯†=è§£å¯†)

---

## ğŸ“ æ–‡ä»¶æ“ä½œå‡½æ•°

### 1. load_json_from_file() - åŠ è½½JSON

```cpp
Json::Value StorageNode::load_json_from_file(const std::string& filepath)
```

**å®ç°æµç¨‹**:

```
1. æ‰“å¼€æ–‡ä»¶
   std::ifstream file(filepath)
   
2. æ£€æŸ¥æ–‡ä»¶æ˜¯å¦æ‰“å¼€
   if (!file.is_open()) â†’ è¿”å›ç©ºå¯¹è±¡

3. åˆ›å»ºJSONè¯»å–å™¨
   Json::CharReaderBuilder builder
   
4. è§£æJSON
   Json::parseFromStream(builder, file, &root, &errs)
   
5. å…³é—­æ–‡ä»¶
   file.close()
   
è¿”å›: Json::Valueå¯¹è±¡
```

**é”™è¯¯å¤„ç†**:
- æ–‡ä»¶ä¸å­˜åœ¨ â†’ è¿”å›ç©ºJsonå¯¹è±¡
- JSONæ ¼å¼é”™è¯¯ â†’ æ‰“å°é”™è¯¯ä¿¡æ¯ï¼Œè¿”å›ç©ºå¯¹è±¡

### 2. save_json_to_file() - ä¿å­˜JSON

```cpp
bool StorageNode::save_json_to_file(const Json::Value& root, 
                                    const std::string& filepath)
```

**å®ç°æµç¨‹**:

```
1. æ‰“å¼€è¾“å‡ºæ–‡ä»¶
   std::ofstream file(filepath)
   
2. é…ç½®JSONå†™å…¥å™¨
   Json::StreamWriterBuilder builder
   builder["indentation"] = "    "  // 4ç©ºæ ¼ç¼©è¿›
   
3. åˆ›å»ºå†™å…¥å™¨
   writer = builder.newStreamWriter()
   
4. å†™å…¥JSON
   writer->write(root, &file)
   
5. å…³é—­æ–‡ä»¶
   file.close()
   
è¿”å›: true/false
```

**æ ¼å¼åŒ–**:
- ä½¿ç”¨4ç©ºæ ¼ç¼©è¿›
- ç”Ÿæˆå¯è¯»çš„æ ¼å¼åŒ–JSON

### 3. read_file_content() - è¯»å–æ–‡ä»¶å†…å®¹

```cpp
std::string StorageNode::read_file_content(const std::string& filepath)
```

**å®ç°æµç¨‹**:

```
1. ä»¥äºŒè¿›åˆ¶æ¨¡å¼æ‰“å¼€
   std::ifstream file(filepath, std::ios::binary)
   
2. ä½¿ç”¨stringstreamè¯»å–
   std::stringstream buffer
   buffer << file.rdbuf()
   
3. è½¬æ¢ä¸ºå­—ç¬¦ä¸²
   return buffer.str()
```

**ç‰¹ç‚¹**:
- äºŒè¿›åˆ¶æ¨¡å¼ (ä¿æŒæ•°æ®å®Œæ•´æ€§)
- ä¸€æ¬¡æ€§è¯»å–å…¨éƒ¨å†…å®¹
- é€‚ç”¨äºåŠ å¯†æ–‡ä»¶

### 4. write_file_content() - å†™å…¥æ–‡ä»¶å†…å®¹

```cpp
bool StorageNode::write_file_content(const std::string& filepath, 
                                     const std::string& content)
```

**å®ç°æµç¨‹**:

```
1. ä»¥äºŒè¿›åˆ¶æ¨¡å¼æ‰“å¼€
   std::ofstream file(filepath, std::ios::binary)
   
2. å†™å…¥å†…å®¹
   file << content
   
3. å…³é—­æ–‡ä»¶
   file.close()
   
è¿”å›: true/false
```

---

## ğŸ—‚ï¸ ç´¢å¼•ç®¡ç†å‡½æ•°

### 1. load_index_database() - åŠ è½½ç´¢å¼•æ•°æ®åº“

```cpp
bool StorageNode::load_index_database()
```

**å®ç°æµç¨‹**:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨                  â”‚
â”‚    index_path = data/index_db.json  â”‚
â”‚    if (!exists) â†’ åˆ›å»ºæ–°æ•°æ®åº“       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2. åŠ è½½JSONæ–‡ä»¶                      â”‚
â”‚    root = load_json_from_file()     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3. æ¸…ç©ºå†…å­˜ä¸­çš„ç´¢å¼•                  â”‚
â”‚    index_database.clear()           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 4. éå†JSONä¸­çš„æ‰€æœ‰Ts               â”‚
â”‚    for each ts in indices:          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 5. è§£ææ¯ä¸ªTsçš„æ¡ç›®æ•°ç»„              â”‚
â”‚    for each entry in indices[ts]:   â”‚
â”‚      â”œâ”€â”€ æå– Ts                    â”‚
â”‚      â”œâ”€â”€ æå– keyword               â”‚
â”‚      â”œâ”€â”€ æå– pointer               â”‚
â”‚      â”œâ”€â”€ æå– file_identifier       â”‚
â”‚      â””â”€â”€ æå– valid                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 6. æ·»åŠ åˆ°å†…å­˜æ˜ å°„                    â”‚
â”‚    index_database[ts].push_back()   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 7. æ‰“å°åŠ è½½ç»Ÿè®¡                      â”‚
â”‚    è¾“å‡ºæ€»æ¡ç›®æ•°                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**JSONç»“æ„ç¤ºä¾‹**:
```json
{
  "indices": {
    "ts_1": [
      {
        "Ts": "ts_1",
        "keyword": "kw_1",
        "pointer": "ptr_1",
        "file_identifier": "file_1",
        "valid": true
      }
    ]
  }
}
```

**å†…å­˜ç»“æ„**:
```cpp
index_database["ts_1"] = [
    IndexEntry{Ts:"ts_1", keyword:"kw_1", ...}
]
```

### 2. save_index_database() - ä¿å­˜ç´¢å¼•æ•°æ®åº“

```cpp
bool StorageNode::save_index_database()
```

**å®ç°æµç¨‹**:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. åˆ›å»ºJSONæ ¹å¯¹è±¡                    â”‚
â”‚    root["version"] = "1.0"          â”‚
â”‚    root["last_updated"] = å½“å‰æ—¶é—´   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2. éå†å†…å­˜ä¸­çš„ç´¢å¼•                  â”‚
â”‚    for (ts, entries) in index_db:   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3. ä¸ºæ¯ä¸ªTsåˆ›å»ºæ¡ç›®æ•°ç»„              â”‚
â”‚    entry_array = Json::arrayValue   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 4. éå†è¯¥Tsçš„æ‰€æœ‰æ¡ç›®                â”‚
â”‚    for entry in entries:            â”‚
â”‚      â”œâ”€â”€ åˆ›å»º entry_obj             â”‚
â”‚      â”œâ”€â”€ è®¾ç½® Ts                    â”‚
â”‚      â”œâ”€â”€ è®¾ç½® keyword               â”‚
â”‚      â”œâ”€â”€ è®¾ç½® pointer               â”‚
â”‚      â”œâ”€â”€ è®¾ç½® file_identifier       â”‚
â”‚      â””â”€â”€ è®¾ç½® valid                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 5. æ·»åŠ åˆ°æ•°ç»„å¹¶è®¡æ•°                  â”‚
â”‚    entry_array.append(entry_obj)    â”‚
â”‚    total++                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 6. æ·»åŠ åˆ°indiceså¯¹è±¡                 â”‚
â”‚    indices[ts] = entry_array        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 7. è®¾ç½®æ ¹å¯¹è±¡                        â”‚
â”‚    root["indices"] = indices        â”‚
â”‚    root["total_entries"] = total    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 8. ä¿å­˜åˆ°æ–‡ä»¶                        â”‚
â”‚    save_json_to_file(root, path)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ æ ¸å¿ƒåŠŸèƒ½å‡½æ•°

### 1. insert_file() - æ–‡ä»¶æ’å…¥

```cpp
bool StorageNode::insert_file(const std::string& param_json_path, 
                               const std::string& enc_file_path)
```

**å®Œæ•´å®ç°æµç¨‹**:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ­¥éª¤1: éªŒè¯è¾“å…¥æ–‡ä»¶                                       â”‚
â”‚ â”œâ”€â”€ æ£€æŸ¥ param_json_path æ˜¯å¦å­˜åœ¨                        â”‚
â”‚ â””â”€â”€ æ£€æŸ¥ enc_file_path æ˜¯å¦å­˜åœ¨                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ­¥éª¤2: è¯»å–å¹¶è§£æJSONå‚æ•°                                 â”‚
â”‚ params = load_json_from_file(param_json_path)            â”‚
â”‚                                                          â”‚
â”‚ æå–å­—æ®µ:                                                â”‚
â”‚ â”œâ”€â”€ file_id           (string)                          â”‚
â”‚ â”œâ”€â”€ Ts               (array)                            â”‚
â”‚ â”œâ”€â”€ keywords         (array)                            â”‚
â”‚ â”œâ”€â”€ pointer          (string)                           â”‚
â”‚ â”œâ”€â”€ file_auth_tag    (string)                           â”‚
â”‚ â””â”€â”€ metadata         (object, å¯é€‰)                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ­¥éª¤3: å‚æ•°éªŒè¯                                           â”‚
â”‚                                                          â”‚
â”‚ if (Ts.size() != keywords.size()) {                     â”‚
â”‚     é”™è¯¯: æ•°é‡ä¸åŒ¹é…                                      â”‚
â”‚     è¿”å› false                                           â”‚
â”‚ }                                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ­¥éª¤4: æ£€æŸ¥æ–‡ä»¶IDå†²çª                                     â”‚
â”‚                                                          â”‚
â”‚ if (has_file(file_id)) {                                â”‚
â”‚     æç¤º: æ–‡ä»¶å·²å­˜åœ¨                                      â”‚
â”‚     è¯¢é—®æ˜¯å¦è¦†ç›– (y/n)                                    â”‚
â”‚     if (n) â†’ è¿”å› false                                 â”‚
â”‚ }                                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ­¥éª¤5: åˆ›å»ºç´¢å¼•æ¡ç›®                                       â”‚
â”‚                                                          â”‚
â”‚ for i = 0 to Ts.size()-1:                               â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚
â”‚   â”‚ IndexEntry entry               â”‚                    â”‚
â”‚   â”‚ entry.Ts = Ts[i]              â”‚                    â”‚
â”‚   â”‚ entry.keyword = keywords[i]   â”‚                    â”‚
â”‚   â”‚ entry.pointer = pointer       â”‚  â† æ‰€æœ‰æ¡ç›®å…±äº«     â”‚
â”‚   â”‚ entry.file_identifier = file_idâ”‚                   â”‚
â”‚   â”‚ entry.valid = true             â”‚                    â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
â”‚                                                          â”‚
â”‚   index_database[Ts[i]].push_back(entry)                â”‚
â”‚                                                          â”‚
â”‚   æ‰“å°: [i+1] Ts â†’ keyword                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ­¥éª¤6: è¯»å–åŠ å¯†æ–‡ä»¶å†…å®¹                                   â”‚
â”‚                                                          â”‚
â”‚ ciphertext = read_file_content(enc_file_path)           â”‚
â”‚                                                          â”‚
â”‚ if (ciphertext.empty()) {                               â”‚
â”‚     é”™è¯¯: è¯»å–å¤±è´¥                                        â”‚
â”‚     è¿”å› false                                           â”‚
â”‚ }                                                        â”‚
â”‚                                                          â”‚
â”‚ æ‰“å°å¯†æ–‡å¤§å°                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ­¥éª¤7: åˆ›å»ºFileDataå¯¹è±¡                                   â”‚
â”‚                                                          â”‚
â”‚ FileData file_data                                       â”‚
â”‚ file_data.file_id = file_id                             â”‚
â”‚ file_data.ciphertext = ciphertext                       â”‚
â”‚ file_data.pointer = pointer                             â”‚
â”‚ file_data.file_auth_tag = file_auth_tag                 â”‚
â”‚                                                          â”‚
â”‚ file_storage[file_id] = file_data  â† å­˜å…¥å†…å­˜æ˜ å°„        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ­¥éª¤8: ä¿å­˜åˆ°æ–‡ä»¶ç³»ç»Ÿ                                     â”‚
â”‚                                                          â”‚
â”‚ 8.1 ä¿å­˜åŠ å¯†æ–‡ä»¶                                         â”‚
â”‚     dest = data/files/<file_id>.enc                     â”‚
â”‚     copy(enc_file_path â†’ dest)                          â”‚
â”‚                                                          â”‚
â”‚ 8.2 ä¿å­˜ç´¢å¼•æ•°æ®åº“                                       â”‚
â”‚     save_index_database()                               â”‚
â”‚                                                          â”‚
â”‚ 8.3 ä¿å­˜å…ƒæ•°æ®                                           â”‚
â”‚     metadata_obj["file_id"] = file_id                   â”‚
â”‚     metadata_obj["pointer"] = pointer                   â”‚
â”‚     metadata_obj["file_auth_tag"] = file_auth_tag       â”‚
â”‚     metadata_obj["insert_time"] = å½“å‰æ—¶é—´               â”‚
â”‚     metadata_obj["keyword_count"] = Ts.size()           â”‚
â”‚     metadata_obj["file_size"] = ciphertext.length()     â”‚
â”‚     if (paramsæœ‰metadata) {                             â”‚
â”‚         metadata_obj["original"] = params["metadata"]   â”‚
â”‚     }                                                    â”‚
â”‚     ä¿å­˜åˆ°: data/metadata/<file_id>.json                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ­¥éª¤9: æ›´æ–°ç»Ÿè®¡ä¿¡æ¯                                       â”‚
â”‚                                                          â”‚
â”‚ update_statistics("insert")                             â”‚
â”‚ save_node_info()                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ­¥éª¤10: æ‰“å°æˆåŠŸä¿¡æ¯                                      â”‚
â”‚                                                          â”‚
â”‚ âœ… æ–‡ä»¶æ’å…¥æˆåŠŸ!                                          â”‚
â”‚    ç´¢å¼•æ¡ç›®: N                                           â”‚
â”‚    æ€»æ–‡ä»¶æ•°: X                                           â”‚
â”‚    æ€»ç´¢å¼•æ•°: Y                                           â”‚
â”‚                                                          â”‚
â”‚ è¿”å› true                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**æ•°æ®æµå‘**:

```
JSONæ–‡ä»¶ â”€â”€â”¬â”€â†’ è§£æ â”€â”€â†’ éªŒè¯ â”€â”€â†’ åˆ›å»ºIndexEntry â”€â”€â†’ å†…å­˜
          â”‚                                       â”‚
åŠ å¯†æ–‡ä»¶ â”€â”€â”´â”€â†’ è¯»å– â”€â”€â†’ åˆ›å»ºFileData â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ å†…å­˜
                                                 â”‚
                                                 â–¼
                                           ä¿å­˜åˆ°ç£ç›˜
                                          â”œâ”€â”€ files/
                                          â”œâ”€â”€ metadata/
                                          â””â”€â”€ index_db.json
```

### 2. search_keyword() - å…³é”®è¯æœç´¢

```cpp
SearchResult StorageNode::search_keyword(
    const std::string& search_token,  // Ts
    const std::string& latest_state,  // å¯é€‰
    const std::string& seed)          // å¯é€‰
```

**å®ç°æµç¨‹**:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ è¾“å…¥: search_token (Ts)              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ åœ¨ç´¢å¼•æ•°æ®åº“ä¸­æŸ¥æ‰¾                    â”‚
â”‚                                      â”‚
â”‚ auto it = index_database.find(      â”‚
â”‚     search_token)                   â”‚
â”‚                                      â”‚
â”‚ if (it == end()) {                  â”‚
â”‚     æœªæ‰¾åˆ° â†’ è¿”å›ç©ºç»“æœ              â”‚
â”‚ }                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ éå†åŒ¹é…çš„ç´¢å¼•æ¡ç›®                    â”‚
â”‚                                      â”‚
â”‚ for (entry in it->second) {         â”‚
â”‚     if (entry.valid) {              â”‚
â”‚         æ·»åŠ åˆ°ç»“æœ                   â”‚
â”‚     }                                â”‚
â”‚ }                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ„å»ºSearchResult                     â”‚
â”‚                                      â”‚
â”‚ result.file_identifiers = [...]     â”‚
â”‚ result.keyword_proofs = [...]       â”‚
â”‚ result.aggregated_proof = ""        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ è¿”å›ç»“æœ                              â”‚
â”‚ æ‰“å°æ‰¾åˆ°çš„æ–‡ä»¶æ•°é‡                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**æŸ¥æ‰¾æœºåˆ¶**:

```
index_database (std::map):
  "ts_1" â†’ [entry1, entry2, ...]
  "ts_2" â†’ [entry3, entry4, ...]
  "ts_3" â†’ [entry5]
     â†‘
     â”‚
  search_token = "ts_2"
     â”‚
     â†“
  è¿”å›: [entry3, entry4, ...]
     â”‚
     â†“
  è¿‡æ»¤ valid == true
     â”‚
     â†“
  æå– file_identifier
```

**æ—¶é—´å¤æ‚åº¦**:
- æŸ¥æ‰¾: O(log n) - ä½¿ç”¨std::mapçš„çº¢é»‘æ ‘
- éå†: O(m) - mæ˜¯è¯¥Tsçš„æ¡ç›®æ•°
- æ€»è®¡: O(log n + m)

### 3. retrieve_file() - æ–‡ä»¶æ£€ç´¢

```cpp
Json::Value StorageNode::retrieve_file(const std::string& file_id)
```

**å®ç°æµç¨‹**:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ è¾“å…¥: file_id                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨                      â”‚
â”‚                                      â”‚
â”‚ if (!has_file(file_id)) {           â”‚
â”‚     result["success"] = false       â”‚
â”‚     result["error"] = "æ–‡ä»¶ä¸å­˜åœ¨"   â”‚
â”‚     è¿”å› result                      â”‚
â”‚ }                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ä»å†…å­˜ä¸­è·å–FileData                 â”‚
â”‚                                      â”‚
â”‚ const FileData& data =              â”‚
â”‚     file_storage[file_id]           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ„å»ºè¿”å›çš„JSONå¯¹è±¡                    â”‚
â”‚                                      â”‚
â”‚ result["success"] = true            â”‚
â”‚ result["file_id"] = file_id         â”‚
â”‚ result["ciphertext"] = ciphertext   â”‚
â”‚ result["pointer"] = pointer         â”‚
â”‚ result["file_auth_tag"] = auth_tag  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ è¿”å› result                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**è¿”å›JSONæ ¼å¼**:

```json
{
    "success": true,
    "file_id": "file_12345",
    "ciphertext": "encrypted_data...",
    "pointer": "ptr_abc123",
    "file_auth_tag": "tag_xyz789"
}
```

### 4. delete_file() - æ–‡ä»¶åˆ é™¤

```cpp
bool StorageNode::delete_file(const std::string& file_id, 
                               const std::string& del_proof)
```

**å®ç°æµç¨‹**:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ­¥éª¤1: æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨               â”‚
â”‚                                      â”‚
â”‚ if (!has_file(file_id)) {           â”‚
â”‚     é”™è¯¯: æ–‡ä»¶ä¸å­˜åœ¨                 â”‚
â”‚     è¿”å› false                       â”‚
â”‚ }                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ­¥éª¤2: æ ‡è®°ç´¢å¼•ä¸ºæ— æ•ˆ (è½¯åˆ é™¤)        â”‚
â”‚                                      â”‚
â”‚ for (ts, entries) in index_database: â”‚
â”‚   for entry in entries:             â”‚
â”‚     if (entry.file_identifier       â”‚
â”‚         == file_id) {               â”‚
â”‚       entry.valid = false           â”‚
â”‚     }                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ­¥éª¤3: åˆ é™¤å†…å­˜ä¸­çš„FileData           â”‚
â”‚                                      â”‚
â”‚ file_storage.erase(file_id)         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ­¥éª¤4: åˆ é™¤ç£ç›˜æ–‡ä»¶                   â”‚
â”‚                                      â”‚
â”‚ 4.1 åˆ é™¤åŠ å¯†æ–‡ä»¶                     â”‚
â”‚     path = data/files/<id>.enc      â”‚
â”‚     remove(path)                    â”‚
â”‚                                      â”‚
â”‚ 4.2 åˆ é™¤å…ƒæ•°æ®                       â”‚
â”‚     path = data/metadata/<id>.json  â”‚
â”‚     remove(path)                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ­¥éª¤5: ä¿å­˜æ›´æ–°                       â”‚
â”‚                                      â”‚
â”‚ save_index_database()               â”‚
â”‚ update_statistics("delete")         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ è¿”å› true                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**åˆ é™¤ç­–ç•¥**:

```
è½¯åˆ é™¤ (ç´¢å¼•):
  IndexEntry.valid = false
  â”œâ”€â”€ ä¿ç•™åœ¨index_db.jsonä¸­
  â”œâ”€â”€ æœç´¢æ—¶è¢«è¿‡æ»¤
  â””â”€â”€ å¯ä»¥ç”¨äºå®¡è®¡

ç¡¬åˆ é™¤ (æ–‡ä»¶):
  â”œâ”€â”€ ä»å†…å­˜ä¸­åˆ é™¤ (file_storage.erase)
  â”œâ”€â”€ åˆ é™¤åŠ å¯†æ–‡ä»¶ (files/<id>.enc)
  â””â”€â”€ åˆ é™¤å…ƒæ•°æ® (metadata/<id>.json)
```

### 5. generate_integrity_proof() - ç”Ÿæˆå®Œæ•´æ€§è¯æ˜

```cpp
std::string StorageNode::generate_integrity_proof(
    const std::string& file_id, 
    const std::string& seed)
```

**å®ç°æµç¨‹**:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨                      â”‚
â”‚                                      â”‚
â”‚ if (!has_file(file_id)) {           â”‚
â”‚     è¿”å› ""                          â”‚
â”‚ }                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ è·å–æ–‡ä»¶æ•°æ®                          â”‚
â”‚                                      â”‚
â”‚ const FileData& data =              â”‚
â”‚     file_storage[file_id]           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ç»„åˆè¾“å…¥å­—ç¬¦ä¸²                        â”‚
â”‚                                      â”‚
â”‚ combined = file_id +                â”‚
â”‚            file_auth_tag +          â”‚
â”‚            seed                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ è®¡ç®—å“ˆå¸Œè¯æ˜                          â”‚
â”‚                                      â”‚
â”‚ proof = compute_hash_H1(combined)   â”‚
â”‚                                      â”‚
â”‚ SHA256(file_id || auth_tag || seed) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ è¿”å›è¯æ˜ (64å­—ç¬¦åå…­è¿›åˆ¶å­—ç¬¦ä¸²)       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**è¯æ˜åŸç†**:

```
å®Œæ•´æ€§è¯æ˜ = H(file_id || file_auth_tag || seed)

éªŒè¯è¿‡ç¨‹:
1. å®¢æˆ·ç«¯æŒæœ‰: file_id, seed
2. æœåŠ¡å™¨æŒæœ‰: file_auth_tag
3. æœåŠ¡å™¨ç”Ÿæˆ: proof
4. å®¢æˆ·ç«¯éªŒè¯: ä½¿ç”¨ç›¸åŒè¾“å…¥é‡æ–°è®¡ç®—å“ˆå¸Œ
5. æ¯”è¾ƒ: å®¢æˆ·ç«¯è®¡ç®—çš„å“ˆå¸Œ == proof
```

---

## ğŸ”„ å®Œæ•´è¿è¡Œæµç¨‹

### ç¨‹åºå¯åŠ¨æµç¨‹

```
main()
  â”‚
  â”œâ”€â†’ 1. ä¿¡å·å¤„ç†å™¨è®¾ç½®
  â”‚      signal(SIGINT, signal_handler)
  â”‚      signal(SIGTERM, signal_handler)
  â”‚
  â”œâ”€â†’ 2. è§£æå‘½ä»¤è¡Œå‚æ•°
  â”‚      data_dir = argv[1] (é»˜è®¤: ./data)
  â”‚      port = argv[2] (é»˜è®¤: 9000)
  â”‚
  â”œâ”€â†’ 3. åˆ›å»ºStorageNodeå¯¹è±¡
  â”‚      g_node = new StorageNode(data_dir, port)
  â”‚      â”‚
  â”‚      â””â”€â†’ æ„é€ å‡½æ•°æ‰§è¡Œ:
  â”‚            â”œâ”€â”€ è®¾ç½® data_dir, files_dir, metadata_dir
  â”‚            â””â”€â”€ ç”Ÿæˆ node_id
  â”‚
  â”œâ”€â†’ 4. åˆå§‹åŒ–æ•°æ®ç›®å½•
  â”‚      initialize_directories()
  â”‚      â”œâ”€â”€ åˆ›å»º data/
  â”‚      â”œâ”€â”€ åˆ›å»º data/files/
  â”‚      â””â”€â”€ åˆ›å»º data/metadata/
  â”‚
  â”œâ”€â†’ 5. åŠ è½½é…ç½®
  â”‚      load_config()
  â”‚      â”œâ”€â”€ æ£€æŸ¥ config.json æ˜¯å¦å­˜åœ¨
  â”‚      â”œâ”€â”€ ä¸å­˜åœ¨ â†’ create_default_config()
  â”‚      â””â”€â”€ å­˜åœ¨ â†’ è¯»å–å¹¶åº”ç”¨é…ç½®
  â”‚
  â”œâ”€â†’ 6. åˆå§‹åŒ–å¯†ç å­¦
  â”‚      setup_cryptography()
  â”‚      â”œâ”€â”€ åˆå§‹åŒ–é…å¯¹å‚æ•°
  â”‚      â”œâ”€â”€ åˆå§‹åŒ–ç¾¤å…ƒç´  g, mu
  â”‚      â””â”€â”€ è®¾ç½® crypto_initialized = true
  â”‚
  â”œâ”€â†’ 7. åŠ è½½ç´¢å¼•æ•°æ®åº“
  â”‚      load_index_database()
  â”‚      â”œâ”€â”€ æ£€æŸ¥ index_db.json æ˜¯å¦å­˜åœ¨
  â”‚      â”œâ”€â”€ ä¸å­˜åœ¨ â†’ åˆ›å»ºç©ºæ•°æ®åº“
  â”‚      â””â”€â”€ å­˜åœ¨ â†’ åŠ è½½åˆ° index_database
  â”‚
  â”œâ”€â†’ 8. åŠ è½½èŠ‚ç‚¹ä¿¡æ¯
  â”‚      load_node_info()
  â”‚      â””â”€â”€ åŠ è½½æˆ–åˆ›å»º node_info.json
  â”‚
  â”œâ”€â†’ 9. æ‰“å°åˆå§‹çŠ¶æ€
  â”‚      print_status()
  â”‚
  â””â”€â†’ 10. è¿›å…¥ä¸»å¾ªç¯
         while(true) {
             print_menu()
             è¯»å–ç”¨æˆ·é€‰æ‹©
             switch(choice) {
                 case 1: handle_insert_file()
                 case 2: handle_search_keyword()
                 case 3: handle_retrieve_file()
                 ...
                 case 0: é€€å‡º
             }
         }
```

### æ–‡ä»¶æ’å…¥å®Œæ•´æµç¨‹

```
ç”¨æˆ·é€‰æ‹©: 1 (æ’å…¥æ–‡ä»¶)
  â”‚
  â”œâ”€â†’ handle_insert_file()
  â”‚     â”‚
  â”‚     â”œâ”€â†’ æç¤ºè¾“å…¥å‚æ•°æ–‡ä»¶è·¯å¾„
  â”‚     â”‚     ç”¨æˆ·è¾“å…¥: ./params.json
  â”‚     â”‚
  â”‚     â”œâ”€â†’ æç¤ºè¾“å…¥åŠ å¯†æ–‡ä»¶è·¯å¾„
  â”‚     â”‚     ç”¨æˆ·è¾“å…¥: ./file.enc
  â”‚     â”‚
  â”‚     â””â”€â†’ è°ƒç”¨ node->insert_file(params_path, enc_path)
  â”‚           â”‚
  â”‚           â”œâ”€â†’ éªŒè¯æ–‡ä»¶å­˜åœ¨æ€§
  â”‚           â”‚     â”œâ”€â”€ params.json âœ“
  â”‚           â”‚     â””â”€â”€ file.enc âœ“
  â”‚           â”‚
  â”‚           â”œâ”€â†’ è¯»å–JSONå‚æ•°
  â”‚           â”‚     params = load_json_from_file()
  â”‚           â”‚     æå–:
  â”‚           â”‚       â”œâ”€â”€ file_id
  â”‚           â”‚       â”œâ”€â”€ Tsæ•°ç»„ [ts1, ts2, ts3]
  â”‚           â”‚       â”œâ”€â”€ keywordsæ•°ç»„ [kw1, kw2, kw3]
  â”‚           â”‚       â”œâ”€â”€ pointer
  â”‚           â”‚       â””â”€â”€ file_auth_tag
  â”‚           â”‚
  â”‚           â”œâ”€â†’ éªŒè¯å‚æ•°
  â”‚           â”‚     Ts.size() == keywords.size() âœ“
  â”‚           â”‚
  â”‚           â”œâ”€â†’ åˆ›å»ºç´¢å¼•æ¡ç›®
  â”‚           â”‚     for i in 0..2:
  â”‚           â”‚       entry.Ts = Ts[i]
  â”‚           â”‚       entry.keyword = keywords[i]
  â”‚           â”‚       entry.pointer = pointer (å…±äº«)
  â”‚           â”‚       index_database[Ts[i]].push(entry)
  â”‚           â”‚
  â”‚           â”œâ”€â†’ è¯»å–åŠ å¯†æ–‡ä»¶
  â”‚           â”‚     ciphertext = read_file_content()
  â”‚           â”‚
  â”‚           â”œâ”€â†’ åˆ›å»ºFileData
  â”‚           â”‚     file_data.file_id = file_id
  â”‚           â”‚     file_data.ciphertext = ciphertext
  â”‚           â”‚     file_data.pointer = pointer
  â”‚           â”‚     file_data.file_auth_tag = auth_tag
  â”‚           â”‚     file_storage[file_id] = file_data
  â”‚           â”‚
  â”‚           â”œâ”€â†’ ä¿å­˜åˆ°æ–‡ä»¶ç³»ç»Ÿ
  â”‚           â”‚     â”œâ”€â”€ å¤åˆ¶: file.enc â†’ data/files/<id>.enc
  â”‚           â”‚     â”œâ”€â”€ ä¿å­˜: index_db.json
  â”‚           â”‚     â””â”€â”€ ä¿å­˜: data/metadata/<id>.json
  â”‚           â”‚
  â”‚           â”œâ”€â†’ æ›´æ–°ç»Ÿè®¡
  â”‚           â”‚     update_statistics()
  â”‚           â”‚     save_node_info()
  â”‚           â”‚
  â”‚           â””â”€â†’ è¿”å› true
  â”‚
  â””â”€â†’ æ‰“å°æˆåŠŸæ¶ˆæ¯
        ç­‰å¾…ç”¨æˆ·æŒ‰Enterè¿”å›èœå•
```

### æœç´¢å’Œæ£€ç´¢æµç¨‹

```
ç”¨æˆ·é€‰æ‹©: 2 (æœç´¢å…³é”®è¯)
  â”‚
  â”œâ”€â†’ handle_search_keyword()
  â”‚     â”‚
  â”‚     â”œâ”€â†’ æç¤ºè¾“å…¥æœç´¢ä»¤ç‰Œ (Ts)
  â”‚     â”‚     ç”¨æˆ·è¾“å…¥: ts_contract_2025
  â”‚     â”‚
  â”‚     â””â”€â†’ è°ƒç”¨ search_keyword(ts, "", "")
  â”‚           â”‚
  â”‚           â”œâ”€â†’ åœ¨index_databaseä¸­æŸ¥æ‰¾
  â”‚           â”‚     it = index_database.find("ts_contract_2025")
  â”‚           â”‚     æ‰¾åˆ° â†’ entries = it->second
  â”‚           â”‚
  â”‚           â”œâ”€â†’ è¿‡æ»¤æœ‰æ•ˆæ¡ç›®
  â”‚           â”‚     for entry in entries:
  â”‚           â”‚       if entry.valid:
  â”‚           â”‚         æ·»åŠ  file_identifier åˆ°ç»“æœ
  â”‚           â”‚
  â”‚           â””â”€â†’ è¿”å› SearchResult
  â”‚                 file_identifiers = ["file_123", "file_456"]
  â”‚
  â””â”€â†’ æ˜¾ç¤ºæœç´¢ç»“æœ
        æ‰¾åˆ° 2 ä¸ªæ–‡ä»¶
        [1] file_123
        [2] file_456

ç”¨æˆ·é€‰æ‹©: 3 (æ£€ç´¢æ–‡ä»¶)
  â”‚
  â”œâ”€â†’ handle_retrieve_file()
  â”‚     â”‚
  â”‚     â”œâ”€â†’ æç¤ºè¾“å…¥æ–‡ä»¶ID
  â”‚     â”‚     ç”¨æˆ·è¾“å…¥: file_123
  â”‚     â”‚
  â”‚     â””â”€â†’ è°ƒç”¨ retrieve_file("file_123")
  â”‚           â”‚
  â”‚           â”œâ”€â†’ æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨
  â”‚           â”‚     has_file("file_123") â†’ true
  â”‚           â”‚
  â”‚           â”œâ”€â†’ è·å–FileData
  â”‚           â”‚     data = file_storage["file_123"]
  â”‚           â”‚
  â”‚           â””â”€â†’ æ„å»ºJSONç»“æœ
  â”‚                 {
  â”‚                   "success": true,
  â”‚                   "file_id": "file_123",
  â”‚                   "ciphertext": "...",
  â”‚                   "pointer": "...",
  â”‚                   "file_auth_tag": "..."
  â”‚                 }
  â”‚
  â”œâ”€â†’ æ˜¾ç¤ºæ–‡ä»¶ä¿¡æ¯
  â”‚     æ–‡ä»¶ID, å¤§å°, æŒ‡é’ˆ, è®¤è¯æ ‡ç­¾
  â”‚
  â””â”€â†’ è¯¢é—®æ˜¯å¦ä¿å­˜åˆ°æ–‡ä»¶
        ç”¨æˆ·é€‰æ‹©: y
        è¾“å…¥è·¯å¾„: ./retrieved.enc
        ä¿å­˜å¯†æ–‡åˆ°æ–‡ä»¶
```

---

## ğŸ“Š æ•°æ®æµå‘å›¾

### æ’å…¥æ“ä½œæ•°æ®æµ

```
ç”¨æˆ·è¾“å…¥                     å†…å­˜                      ç£ç›˜
â”€â”€â”€â”€â”€â”€â”€â”€â”€                   â”€â”€â”€â”€â”€â”€                   â”€â”€â”€â”€â”€â”€

params.json  â”€â”
              â”œâ”€â†’ è§£æ â”€â”€â†’ IndexEntry[] â”€â”€â†’ index_database â”€â”€â†’ index_db.json
file.enc  â”€â”€â”€â”€â”˜            FileData              â”‚
                              â†“                  â”œâ”€â”€â†’ files/<id>.enc
                        file_storage             â”‚
                                                 â””â”€â”€â†’ metadata/<id>.json
```

### æœç´¢æ“ä½œæ•°æ®æµ

```
ç”¨æˆ·è¾“å…¥            å†…å­˜ç´¢å¼•                   ç»“æœ
â”€â”€â”€â”€â”€â”€â”€â”€          â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                 â”€â”€â”€â”€

search_token â”€â”€â†’ index_database.find() â”€â”€â†’ entries[] â”€â”€â†’ è¿‡æ»¤ valid
   (Ts)              â†“                                      â†“
                  åŒ¹é…çš„æ¡ç›®                          file_identifiers[]
                     â†“                                      â†“
                æå– file_id                          è¿”å›ç»™ç”¨æˆ·
```

### æ£€ç´¢æ“ä½œæ•°æ®æµ

```
ç”¨æˆ·è¾“å…¥           å†…å­˜                ç£ç›˜              è¾“å‡º
â”€â”€â”€â”€â”€â”€â”€â”€         â”€â”€â”€â”€â”€â”€              â”€â”€â”€â”€â”€â”€           â”€â”€â”€â”€â”€â”€

file_id â”€â”€â†’ file_storage.find() â”€â”€â†’ FileData â”€â”€â†’ ciphertext
               â†“                        â†“              â†“
          æ‰¾åˆ° data               æå–å­—æ®µ        è¿”å›JSON
                                     â†“              â†“
                                   pointer      ç”¨æˆ·ä¿å­˜åˆ°æ–‡ä»¶
                                     â†“
                                file_auth_tag
```

---

## ğŸ”— å‡½æ•°è°ƒç”¨é“¾

### å¯åŠ¨åˆå§‹åŒ–è°ƒç”¨é“¾

```
main()
 â”œâ”€â†’ StorageNode::StorageNode()
 â”œâ”€â†’ StorageNode::initialize_directories()
 â”‚    â”œâ”€â†’ create_directory(data_dir)
 â”‚    â”œâ”€â†’ create_directory(files_dir)
 â”‚    â””â”€â†’ create_directory(metadata_dir)
 â”œâ”€â†’ StorageNode::load_config()
 â”‚    â”œâ”€â†’ file_exists(config_path)
 â”‚    â”œâ”€â†’ load_json_from_file(config_path)  [å¦‚æœå­˜åœ¨]
 â”‚    â””â”€â†’ create_default_config()           [å¦‚æœä¸å­˜åœ¨]
 â”‚         â””â”€â†’ save_json_to_file()
 â”œâ”€â†’ StorageNode::setup_cryptography()
 â”‚    â”œâ”€â†’ pairing_init_set_buf()
 â”‚    â”œâ”€â†’ element_init_G1()
 â”‚    â”œâ”€â†’ element_random()
 â”‚    â””â”€â†’ mpz_init()
 â”œâ”€â†’ StorageNode::load_index_database()
 â”‚    â”œâ”€â†’ file_exists(index_path)
 â”‚    â”œâ”€â†’ load_json_from_file()
 â”‚    â””â”€â†’ å¡«å…… index_database
 â””â”€â†’ StorageNode::load_node_info()
      â””â”€â†’ load_json_from_file()
```

### æ’å…¥æ–‡ä»¶è°ƒç”¨é“¾

```
handle_insert_file()
 â””â”€â†’ StorageNode::insert_file()
      â”œâ”€â†’ file_exists(param_json_path)
      â”œâ”€â†’ file_exists(enc_file_path)
      â”œâ”€â†’ load_json_from_file(param_json_path)
      â”œâ”€â†’ has_file(file_id)
      â”œâ”€â†’ read_file_content(enc_file_path)
      â”œâ”€â†’ save_encrypted_file()
      â”‚    â”œâ”€â†’ read_file_content()
      â”‚    â””â”€â†’ write_file_content()
      â”œâ”€â†’ save_index_database()
      â”‚    â”œâ”€â†’ get_current_timestamp()
      â”‚    â””â”€â†’ save_json_to_file()
      â”œâ”€â†’ save_json_to_file(metadata_path)
      â””â”€â†’ update_statistics()
           â””â”€â†’ save_node_info()
                â””â”€â†’ save_json_to_file()
```

### æœç´¢æ–‡ä»¶è°ƒç”¨é“¾

```
handle_search_keyword()
 â””â”€â†’ StorageNode::search_keyword()
      â””â”€â†’ index_database.find(search_token)
```

### æ£€ç´¢æ–‡ä»¶è°ƒç”¨é“¾

```
handle_retrieve_file()
 â””â”€â†’ StorageNode::retrieve_file()
      â””â”€â†’ has_file(file_id)
```

### åˆ é™¤æ–‡ä»¶è°ƒç”¨é“¾

```
handle_delete_file()
 â””â”€â†’ StorageNode::delete_file()
      â”œâ”€â†’ has_file(file_id)
      â”œâ”€â†’ file_storage.erase(file_id)
      â”œâ”€â†’ remove(enc_file_path)       [ç³»ç»Ÿè°ƒç”¨]
      â”œâ”€â†’ remove(metadata_path)       [ç³»ç»Ÿè°ƒç”¨]
      â”œâ”€â†’ save_index_database()
      â”‚    â””â”€â†’ save_json_to_file()
      â””â”€â†’ update_statistics()
           â””â”€â†’ save_node_info()
```

---

## ğŸ” å¯†ç å­¦å®ç°ç»†èŠ‚

### é…å¯¹å‚æ•°è¯´æ˜

```cpp
pairing_t pairing;  // é…å¯¹ e: G1 Ã— G1 â†’ GT

é…å¯¹ç±»å‹: Type A
- å¯¹ç§°é…å¯¹ (e(g, h) ä¸­ g, h âˆˆ G1)
- åŸºäºè¶…å¥‡å¼‚æ›²çº¿
- ç¾¤é˜¶: q (å¤§è´¨æ•°)
- å®‰å…¨çº§åˆ«: ~80 bits

ç¾¤ç»“æ„:
  G1: åŠ æ³•ç¾¤ (æ¤­åœ†æ›²çº¿ç‚¹ç¾¤)
  GT: ä¹˜æ³•ç¾¤ (æœ‰é™åŸŸä¹˜æ³•ç¾¤)
  e: G1 Ã— G1 â†’ GT (é…å¯¹å‡½æ•°)

åŒçº¿æ€§æ€§è´¨:
  e(aP, bQ) = e(P, Q)^(ab)
  e(P+Q, R) = e(P, R) Â· e(Q, R)
```

### å“ˆå¸Œå‡½æ•°å®¶æ—

```cpp
// H1: {0,1}* â†’ {0,1}^256
std::string compute_hash_H1(input)
  SHA256(input) â†’ 256 bits â†’ hex string (64 chars)

// H2: {0,1}* â†’ G1
void compute_hash_H2(result, input)
  SHA256(input) â†’ 256 bits â†’ element_from_hash() â†’ G1å…ƒç´ 

// H3: {0,1}* â†’ {0,1}^128
std::string compute_hash_H3(input)
  SHA256(input) â†’ å‰128 bits â†’ hex string (32 chars)

// PRF: {0,1}* Ã— {0,1}* â†’ ZN
void compute_prf(result, seed, input)
  H1(seed || input) â†’ è½¬å¤§æ•´æ•° â†’ mod N â†’ ZNä¸­çš„å…ƒç´ 
```

### åº”ç”¨åœºæ™¯

```
æ–‡ä»¶æ’å…¥:
  - æ— ç›´æ¥å¯†ç å­¦æ“ä½œ
  - å­˜å‚¨å¯†æ–‡å’Œæ ‡ç­¾

å…³é”®è¯æœç´¢:
  - ä½¿ç”¨ Ts ä½œä¸ºæœç´¢é™·é—¨
  - H1, H2 å¯ç”¨äºç”Ÿæˆ Ts (å®¢æˆ·ç«¯æ“ä½œ)

å®Œæ•´æ€§è¯æ˜:
  - proof = H1(file_id || file_auth_tag || seed)
  - éªŒè¯: é‡æ–°è®¡ç®—å¹¶æ¯”è¾ƒ

æŒ‡é’ˆè§£å¯†:
  - decrypt_pointer() ä½¿ç”¨XOR
  - å®é™…åº”ç”¨ä¸­åº”ä½¿ç”¨ AES ç­‰
```

---

## ğŸ“ˆ æ€§èƒ½åˆ†æ

### æ—¶é—´å¤æ‚åº¦

| æ“ä½œ | æ—¶é—´å¤æ‚åº¦ | è¯´æ˜ |
|------|-----------|------|
| æ’å…¥æ–‡ä»¶ | O(k log n + m) | k=å…³é”®è¯æ•°, n=ç´¢å¼•æ€»æ•°, m=æ–‡ä»¶å¤§å° |
| æœç´¢å…³é”®è¯ | O(log n + m) | n=ç´¢å¼•æ€»æ•°, m=åŒ¹é…æ¡ç›®æ•° |
| æ£€ç´¢æ–‡ä»¶ | O(1) | ç›´æ¥æ˜ å°„æŸ¥æ‰¾ |
| åˆ é™¤æ–‡ä»¶ | O(n + m) | n=ç´¢å¼•æ€»æ•°, m=æ–‡ä»¶å¤§å° |
| ç”Ÿæˆè¯æ˜ | O(m) | m=æ•°æ®å¤§å° (å“ˆå¸Œè®¡ç®—) |

### ç©ºé—´å¤æ‚åº¦

```
å†…å­˜:
  index_database: O(n)  n=ç´¢å¼•æ¡ç›®æ€»æ•°
  file_storage: O(m)    m=æ–‡ä»¶æ€»å¤§å°

ç£ç›˜:
  index_db.json: O(n)
  files/*.enc: O(m)
  metadata/*.json: O(k)  k=æ–‡ä»¶ä¸ªæ•°
```

### ä¼˜åŒ–å»ºè®®

1. **å¤§æ–‡ä»¶å¤„ç†**
```cpp
// å½“å‰: ä¸€æ¬¡æ€§è¯»å–å…¨éƒ¨å†…å®¹
ciphertext = read_file_content(path);

// ä¼˜åŒ–: æµå¼å¤„ç†
bool retrieve_file_stream(file_id, output_stream);
```

2. **ç´¢å¼•ä¼˜åŒ–**
```cpp
// å½“å‰: ä¿å­˜æ•´ä¸ªç´¢å¼•æ•°æ®åº“
save_index_database();  // å†™å…¥å…¨éƒ¨æ•°æ®

// ä¼˜åŒ–: å¢é‡æ›´æ–°
save_index_entry(ts, entry);  // åªæ›´æ–°å•æ¡
```

3. **ç¼“å­˜æœºåˆ¶**
```cpp
// æ·»åŠ LRUç¼“å­˜
std::map<std::string, FileData> file_cache;
size_t cache_limit = 100;
```

---

## ğŸ§ª æµ‹è¯•å»ºè®®

### å•å…ƒæµ‹è¯•

```cpp
// æµ‹è¯•å¯†ç å­¦å‡½æ•°
void test_hash_functions() {
    std::string input = "test";
    std::string h1 = compute_hash_H1(input);
    assert(h1.length() == 64);  // SHA256 = 32 bytes = 64 hex chars
}

// æµ‹è¯•æ–‡ä»¶æ“ä½œ
void test_file_operations() {
    std::string content = "test data";
    write_file_content("test.txt", content);
    std::string read = read_file_content("test.txt");
    assert(content == read);
}

// æµ‹è¯•ç´¢å¼•ç®¡ç†
void test_index_database() {
    save_index_database();
    load_index_database();
    assert(index_database.size() == expected_size);
}
```

### é›†æˆæµ‹è¯•

```bash
# æµ‹è¯•å®Œæ•´çš„æ’å…¥-æœç´¢-æ£€ç´¢æµç¨‹
1. å‡†å¤‡æµ‹è¯•æ–‡ä»¶
   echo "test data" > test.enc
   
2. å‡†å¤‡å‚æ•°JSON
   cat > test_params.json << EOF
   {
     "file_id": "test_001",
     "Ts": ["ts_test"],
     "keywords": ["test"],
     "pointer": "ptr_test",
     "file_auth_tag": "tag_test"
   }
   EOF

3. è¿è¡Œç¨‹åº
   ./storage_node
   
4. æ‰§è¡Œæ“ä½œ
   é€‰æ‹© 1 â†’ æ’å…¥æ–‡ä»¶
   é€‰æ‹© 2 â†’ æœç´¢ "ts_test"
   é€‰æ‹© 3 â†’ æ£€ç´¢ "test_001"
   
5. éªŒè¯ç»“æœ
   æ£€æŸ¥ data/ ç›®å½•ç»“æ„
   éªŒè¯æ–‡ä»¶å­˜åœ¨æ€§
```

---

## ğŸ“š æ‰©å±•é˜…è¯»

### ç›¸å…³è®ºæ–‡

1. **å¯æœç´¢åŠ å¯†**
   - "Searchable Symmetric Encryption" (Song et al., 2000)
   - "Dynamic Searchable Encryption" (Kamara et al., 2012)

2. **é…å¯¹å¯†ç å­¦**
   - "Pairing-Based Cryptography" (Boneh & Franklin, 2001)
   - "The PBC Library" (Lynn, 2006)

### ç›¸å…³æŠ€æœ¯

- **Bloom Filter**: ç©ºé—´é«˜æ•ˆçš„ç´¢å¼•
- **B+ Tree**: ç£ç›˜å‹å¥½çš„ç´¢å¼•ç»“æ„
- **AES-GCM**: è®¤è¯åŠ å¯†
- **ECDSA**: æ•°å­—ç­¾å

---

## ğŸ“ æ€»ç»“

æœ¬æ–‡æ¡£è¯¦ç»†ä»‹ç»äº†å­˜å‚¨èŠ‚ç‚¹v3.0çš„å®ç°ç»†èŠ‚ï¼ŒåŒ…æ‹¬:

1. âœ… å®Œæ•´çš„æ¶æ„è®¾è®¡
2. âœ… æ ¸å¿ƒæ•°æ®ç»“æ„
3. âœ… å¯†ç å­¦å‡½æ•°å®ç°
4. âœ… æ–‡ä»¶æ“ä½œè¯¦è§£
5. âœ… ç´¢å¼•ç®¡ç†æœºåˆ¶
6. âœ… å®Œæ•´çš„è¿è¡Œæµç¨‹
7. âœ… å‡½æ•°è°ƒç”¨å…³ç³»
8. âœ… æ•°æ®æµå‘åˆ†æ
9. âœ… æ€§èƒ½ä¼˜åŒ–å»ºè®®
10. âœ… æµ‹è¯•æŒ‡å—

é€šè¿‡æœ¬æ–‡æ¡£ï¼Œå¼€å‘è€…å¯ä»¥:
- ç†è§£ç³»ç»Ÿçš„æ•´ä½“æ¶æ„
- æŒæ¡å„ä¸ªå‡½æ•°çš„å®ç°ç»†èŠ‚
- äº†è§£æ•°æ®æµå‘å’Œè°ƒç”¨å…³ç³»
- è¿›è¡ŒäºŒæ¬¡å¼€å‘å’Œä¼˜åŒ–

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0  
**æœ€åæ›´æ–°**: 2025-11-09  
**ä½œè€…**: Storage Node Development Team